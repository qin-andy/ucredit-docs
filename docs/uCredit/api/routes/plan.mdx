---
sidebar_label: Plan Routes
sidebar_position: 1
---

# Plan Routes

import { plan1, planList } from "../sampleObjects";

### `GET` `/api/plans/:plan_id`

Gets a plan by id.

|            | Name    | Type     | Description                                             |
| ---------- | ------- | -------- | ------------------------------------------------------- |
| **Params** | plan_id | `String` | plan id                                                 |
| **Output** |         | `Plan`   | The plan corresponding to the id in the request params. |

#### Sample Output

<samp>
  <pre>{JSON.stringify(plan1, null, 2)}</pre>
</samp>

### `GET` `/api/plansByUser/:user_id`

Gets a list of all plans of a particular user filled with all year and course objects.

|            | Name    | Type     | Description                                                                                                          |
| ---------- | ------- | -------- | -------------------------------------------------------------------------------------------------------------------- |
| **Params** | user_id | `String` | user id                                                                                                              |
| **Output** |         | `Plan[]` | A list of plans corresponding to the plan ids stored in the user corresponding to the user id in the request params. |

#### Sample output

<samp>
  <pre>{JSON.stringify(planList, null, 2)}</pre>
</samp>

### `POST` `/api/plans/`

Creates a new plan. When creating a plan, the post body can specify the number of years("numYear" field) and the backend will automatically generate years document in this order:[freshman, sophomore, junior, senior, fifth year]. For example, if the post body specified numYear: 3, then freshman, sophomore, junior year documents will be generated. The default numYear value is 4 (if you don't specify). plan_ids field of the user document is also updated.

|            | Name     | Type     | Description                                                                          |
| ---------- | -------- | -------- | ------------------------------------------------------------------------------------ |
| **Body**   | name     | `String` | new plan's name                                                                      |
|            | user_id  | `String` | the new plan's owner id                                                              |
|            | majors   | `String` | the degrees associated with the new plan                                             |
|            | numYears | `Number` | Number of years to create                                                            |
|            | expireAt | `Date`   | the time when the object is supposed to be trash-collected (note: this needs fixing) |
| **Output** |          | `Plan`   | Newly created plan.                                                                  |

#### Sample Output

<samp>
  <pre>{JSON.stringify(plan1, null, 2)}</pre>
</samp>

### `PATCH` `/api/plans/:plan_id`

Updates a plan's name or degrees corresponding to a given id.

|            | Name    | Type        | Description                                                         |
| ---------- | ------- | ----------- | ------------------------------------------------------------------- |
| **Body**   | plan_id | `String`    | id of plan to update                                                |
|            | majors  | `String[]?` | optional array of degree ids to update the plan's degree array with |
|            | name    | `String?`   | optional new name for the plan                                      |
| **Output** |         | `Plan`      | Updated plan.                                                       |

#### Sample Output

<samp>
  <pre>{JSON.stringify(plan1, null, 2)}</pre>
</samp>

### `DELETE` `/api/plans/:plan_id`

Deletes a plan corresponding to a given id. By deleting a plan, all associated courses and distributions are deleted from the database.

|            | Name    | Type     | Description          |
| ---------- | ------- | -------- | -------------------- |
| **Params** | plan_id | `String` | id of plan to delete |
| **Output** |         | `Plan`   | Deleted plan.        |

#### Sample Output

<samp>
  <pre>{JSON.stringify(plan1, null, 2)}</pre>
</samp>
